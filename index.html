<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no,minimum-scale=1.0,maximum-scale=1.0" />
		<!--<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no,minimum-scale=1.0,maximum-scale=1.0" />-->
		<title>网易云音乐</title>
		<link rel="stylesheet" href="css/yun.css" />
	</head>
	<body>
		<div id="wrap">
			<div class="head">
				<div class="head-top">
					<div class="left">
						<a href="javascript:;"></a>
					</div>
					<div class="right">
						<a href="javascript:;">下载APP</a>
					</div>
				</div>
				<div class="head-bottom">
					<ul class="list">
						<li><a href="javascript:;">推荐音乐</a></li>
						<li><a href="javascript:;">热歌榜</a></li>
						<li><a href="javascript:;">搜索</a></li>
					</ul>
					<div class="mask"></div>
				</div>
			</div>
			<div class="scroll-content">
				<div>
					<div class="hua">
						<div class="leftt">
							<div class="scroll">
								<ul class="scroll-list">
									<li><a href="javascript:;"><img src="img/01.jpg"/></a></li>
									<li><a href="javascript:;"><img src="img/02.jpg"/></a></li>
									<li><a href="javascript:;"><img src="img/03.jpg"/></a></li>
									<li><a href="javascript:;"><img src="img/04.jpg"/></a></li>
									<li><a href="javascript:;"><img src="img/05.jpg"/></a></li>
									<li><a href="javascript:;"><img src="img/06.jpg"/></a></li>
									<li><a href="javascript:;"><img src="img/07.jpg"/></a></li>
									<li><a href="javascript:;"><img src="img/08.jpg"/></a></li>
									<li><a href="javascript:;"><img src="img/01.jpg"/></a></li>
								</ul>
								<div class="scroll-points"></div>
							</div>
							<div class="content">
						<div class="content-head">
							<div class="mask"></div>
							<div class="content-span">
								<span>推荐歌单</span>
							</div>
						</div>
						<div class="content-cont">
							<ul class="list">
								<li>
									<a href="javascript:;">
										<img src="img/2.jpg"/>
										<p>走心说唱|我只是把故事写进了歌里</p>
										<div class="a-span">
											<span>18.4万</span>
											<span></span>
										</div>
									</a>
								</li>
								<li>
									<a href="javascript:;">
										<img src="img/3.jpg"/>
										<p>走心说唱|我只是把故事写进了歌里</p>
										<div class="a-span">
											<span>18.4万</span>
											<span></span>
										</div>
									</a>
								</li>
								<li>
									<a href="javascript:;">
										<img src="img/4.jpg"/>
										<p>走心说唱|我只是把故事写进了歌里</p>
										<div class="a-span">
											<span>18.4万</span>
											<span></span>
										</div>
									</a>
								</li>
								<li>
									<a href="javascript:;">
										<img src="img/2.jpg"/>
										<p>走心说唱|我只是把故事写进了歌里</p>
										<div class="a-span">
											<span>18.4万</span>
											<span></span>
										</div>
									</a>
								</li>
								<li>
									<a href="javascript:;">
										<img src="img/3.jpg"/>
										<p>走心说唱|我只是把故事写进了歌里</p>
										<div class="a-span">
											<span>18.4万</span>
											<span></span>
										</div>
									</a>
								</li>
								<li>
									<a href="javascript:;">
										<img src="img/1.jpg"/>
										<p>走心说唱|我只是把故事写进了歌里</p>
										<div class="a-span">
											<span>18.4万</span>
											<span></span>
										</div>
									</a>
								</li>
							</ul>
						</div>
						<div class="content-head content-head2">
							<div class="mask"></div>
							<div class="content-span">
								<span>最新音乐</span>
							</div>
						</div>
						<div class="content-music">
							<ul class="list">
								<li>
									<div class="left">
										<a href="https://music.163.com/m/song?id=1438865460&userid=1822917356">
											<span>Home</span>
											<div class="autier">
												<div></div>
												<span>蔡徐坤-Home</span>
											</div>
										</a>
									</div>
									<div class="right">
										<a href="https://music.163.com/m/song?id=1438865460&userid=1822917356">
											<span></span>
										</a>
									</div>
								</li>
								<li>
									<div class="left">
										<a href="https://music.163.com/m/song?id=1438781318">
											<span>全世界最好的你(电视剧《全世界最好的你》同名主题曲)</span>
											<div class="autier">
												<div></div>
												<span>许嵩 - 全世界最好的你</span>
											</div>
										</a>
									</div>
									<div class="right">
										<a href="https://music.163.com/m/song?id=1438781318">
											<span></span>
										</a>
									</div>
								</li>
								<li>
									<div class="left">
										<a href="https://music.163.com/m/song?id=1408901739">
											<span>你最近还好吗</span>
											<div class="autier">
												<div></div>
												<span>Lil Ghost小鬼 - 从M到W的高速公路</span>
											</div>
										</a>
									</div>
									<div class="right">
										<a href="https://music.163.com/m/song?id=1408901739">
											<span></span>
										</a>
									</div>
								</li>
								<li>
									<div class="left">
										<a href="https://music.163.com/m/song?id=1436753138">
											<span>Take Yourself Home</span>
											<div class="autier">
												<div></div>
												<span>Troye Sivan - Take Yourself Home</span>
											</div>
										</a>
									</div>
									<div class="right">
										<a href="https://music.163.com/m/song?id=1436753138">
											<span></span>
										</a>
									</div>
								</li>
								<li>
									<div class="left">
										<a href="https://music.163.com/m/song?id=1413142894">
											<span>大眠 (完整版)(原唱：王心凌)</span>
											<div class="autier">
												<div></div>
												<span>小乐哥 - 大眠 (完整版)</span>
											</div>
										</a>
									</div>
									<div class="right">
										<a href="https://music.163.com/m/song?id=1413142894">
											<span></span>
										</a>
									</div>
								</li>
							</ul>
						</div>
						<div class="content-bottom">
							<div class="bottom-logo">
								<div class="bottom-a">
									<a href="javascript:;">打开APP，发现更多好音乐 &gt;</a>
								</div>
								<p>网易公司版权所有©1997- <!-- --> 2020<!-- -->   杭州乐读科技有限公司运营</p>
							</div>
						</div>
					</div>
						</div>
						<div class="center">
							<div class="center-back">
								<div class="back"><img src="img/hot_music_bg_2x.jpg"/></div>
								<div class="mian">
									<span></span>
									<p>更新日期：04月09日</p>
								</div>
								<div class="center-music">
									<ul class="list">
										<li>
											<div class="number">01</div>
											<div class="left">
												<a href="https://music.163.com/m/song?id=1438865460&userid=1822917356">
													<span>Home</span>
													<div class="autier">
														<div></div>
														<span>蔡徐坤-Home</span>
													</div>
												</a>
											</div>
											<div class="right">
												<a href="https://music.163.com/m/song?id=1438865460&userid=1822917356">
													<span></span>
												</a>
											</div>
										</li>
										<li>
											<div class="number">02</div>
											<div class="left">
												<a href="https://music.163.com/m/song?id=1438781318">
													<span>全世界最好的你(电视剧《全世界最好的你》同名主题曲)</span>
													<div class="autier">
														<div></div>
														<span>许嵩 - 全世界最好的你</span>
													</div>
												</a>
											</div>
											<div class="right">
												<a href="https://music.163.com/m/song?id=1438781318">
													<span></span>
												</a>
											</div>
										</li>
										<li>
											<div class="number">03</div>
											<div class="left">
												<a href="https://music.163.com/m/song?id=1408901739">
													<span>你最近还好吗</span>
													<div class="autier">
														<div></div>
														<span>Lil Ghost小鬼 - 从M到W的高速公路</span>
													</div>
												</a>
											</div>
											<div class="right">
												<a href="https://music.163.com/m/song?id=1408901739">
													<span></span>
												</a>
											</div>
										</li>
										<li>
											<div class="number">04</div>
											<div class="left">
												<a href="https://music.163.com/m/song?id=1436753138">
													<span>Take Yourself Home</span>
													<div class="autier">
														<div></div>
														<span>Troye Sivan - Take Yourself Home</span>
													</div>
												</a>
											</div>
											<div class="right">
												<a href="https://music.163.com/m/song?id=1436753138">
													<span></span>
												</a>
											</div>
										</li>
										<li>
											<div class="number">05</div>
											<div class="left">
												<a href="https://music.163.com/m/song?id=1413142894">
													<span>大眠 (完整版)(原唱：王心凌)</span>
													<div class="autier">
														<div></div>
														<span>小乐哥 - 大眠 (完整版)</span>
													</div>
												</a>
											</div>
											<div class="right">
												<a href="https://music.163.com/m/song?id=1413142894">
													<span></span>
												</a>
											</div>
										</li>
										<li>
											<div class="number">05</div>
											<div class="left">
												<a href="https://music.163.com/m/song?id=1413142894">
													<span>大眠 (完整版)(原唱：王心凌)</span>
													<div class="autier">
														<div></div>
														<span>小乐哥 - 大眠 (完整版)</span>
													</div>
												</a>
											</div>
											<div class="right">
												<a href="https://music.163.com/m/song?id=1413142894">
													<span></span>
												</a>
											</div>
										</li>
										<li>
											<div class="number">05</div>
											<div class="left">
												<a href="https://music.163.com/m/song?id=1413142894">
													<span>大眠 (完整版)(原唱：王心凌)</span>
													<div class="autier">
														<div></div>
														<span>小乐哥 - 大眠 (完整版)</span>
													</div>
												</a>
											</div>
											<div class="right">
												<a href="https://music.163.com/m/song?id=1413142894">
													<span></span>
												</a>
											</div>
										</li>
										<li>
											<div class="number">05</div>
											<div class="left">
												<a href="https://music.163.com/m/song?id=1413142894">
													<span>大眠 (完整版)(原唱：王心凌)</span>
													<div class="autier">
														<div></div>
														<span>小乐哥 - 大眠 (完整版)</span>
													</div>
												</a>
											</div>
											<div class="right">
												<a href="https://music.163.com/m/song?id=1413142894">
													<span></span>
												</a>
											</div>
										</li>
										<li>
											<div class="number">05</div>
											<div class="left">
												<a href="https://music.163.com/m/song?id=1413142894">
													<span>大眠 (完整版)(原唱：王心凌)</span>
													<div class="autier">
														<div></div>
														<span>小乐哥 - 大眠 (完整版)</span>
													</div>
												</a>
											</div>
											<div class="right">
												<a href="https://music.163.com/m/song?id=1413142894">
													<span></span>
												</a>
											</div>
										</li>
										<li>
											<div class="number">05</div>
											<div class="left">
												<a href="https://music.163.com/m/song?id=1413142894">
													<span>大眠 (完整版)(原唱：王心凌)</span>
													<div class="autier">
														<div></div>
														<span>小乐哥 - 大眠 (完整版)</span>
													</div>
												</a>
											</div>
											<div class="right">
												<a href="https://music.163.com/m/song?id=1413142894">
													<span></span>
												</a>
											</div>
										</li>
										<li>
											<div class="number">05</div>
											<div class="left">
												<a href="https://music.163.com/m/song?id=1413142894">
													<span>大眠 (完整版)(原唱：王心凌)</span>
													<div class="autier">
														<div></div>
														<span>小乐哥 - 大眠 (完整版)</span>
													</div>
												</a>
											</div>
											<div class="right">
												<a href="https://music.163.com/m/song?id=1413142894">
													<span></span>
												</a>
											</div>
										</li>
										<li>
											<div class="number">05</div>
											<div class="left">
												<a href="https://music.163.com/m/song?id=1413142894">
													<span>大眠 (完整版)(原唱：王心凌)</span>
													<div class="autier">
														<div></div>
														<span>小乐哥 - 大眠 (完整版)</span>
													</div>
												</a>
											</div>
											<div class="right">
												<a href="https://music.163.com/m/song?id=1413142894">
													<span></span>
												</a>
											</div>
										</li>
										<li>
											<div class="number">05</div>
											<div class="left">
												<a href="https://music.163.com/m/song?id=1413142894">
													<span>大眠 (完整版)(原唱：王心凌)</span>
													<div class="autier">
														<div></div>
														<span>小乐哥 - 大眠 (完整版)</span>
													</div>
												</a>
											</div>
											<div class="right">
												<a href="https://music.163.com/m/song?id=1413142894">
													<span></span>
												</a>
											</div>
										</li>
										<li>
											<div class="number">05</div>
											<div class="left">
												<a href="https://music.163.com/m/song?id=1413142894">
													<span>大眠 (完整版)(原唱：王心凌)</span>
													<div class="autier">
														<div></div>
														<span>小乐哥 - 大眠 (完整版)</span>
													</div>
												</a>
											</div>
											<div class="right">
												<a href="https://music.163.com/m/song?id=1413142894">
													<span></span>
												</a>
											</div>
										</li>
									</ul>
								</div>
								<div class="center-bottom">
									
								</div>
							</div>
						</div>
						<div class="rightt">
							<div class="rearch">
								<form method="post">
									<span></span>
									<input type="text" placeholder="搜索歌曲、歌手、专辑"/>
								</form>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</body>
	<script src="js/mumu.js"></script>
	<script type="text/javascript">
		//for(var i = 0;i<arr.length;i++)
		window.onload = function () {
			document.addEventListener("touchstart",function(ev){
				ev = ev || event
				ev.preventDefault()
			})
			
			;(function (){
				var styleNode = document.createElement("style")
				w = document.documentElement.clientWidth/16
				styleNode.innerHTML = "html{font-size:"+w+"px !important}"
				document.head.appendChild(styleNode)
			})()
			
			
			
			var imgNodes = document.querySelectorAll("#wrap .scroll .scroll-list li a img")
			var ulNode = document.querySelector("#wrap .scroll .scroll-list")
			var scrollNode = document.querySelector("#wrap .scroll")
			var content = document.querySelector("#wrap .scroll-content")
			var item = document.querySelector("#wrap .scroll-content > div")
			scroll()
			function scroll(){
				
				
				var points = document.querySelector(".scroll > .scroll-points");
				
				if(points){
					for(var i=0;i<imgNodes.length - 1;i++){
						if(i==0){
							points.innerHTML+='<span class="active"></span>';
						}else{
							points.innerHTML+='<span></span>';
						}
					}
					var pointsSpan = document.querySelectorAll(".scroll > .scroll-points > span");
				}
				
				
				var start = {x:0,y:0}
				var elementSize = {x:0,y:0}
				var index = 0
				var timer = 0
				
				var isX = true
				var isFirst = true
				
				//无缝滑屏X轴
				scrollNode.addEventListener("touchstart",function (ev){			
					
					ev = ev || event
					var touchC = ev.changedTouches[0]
					ulNode.style.transition = 'none';
					start.x = touchC.clientX
					start.y = touchC.clientY
					
					elementSize.x = ulNode.offsetLeft
					
					clearInterval(timer)
					isX = true
					isFirst = true
				})
				scrollNode.addEventListener("touchmove",function (ev){
					if(!isX){
						return
					}
					
					ev = ev || event
					var touchC = ev.changedTouches[0]
					var now = {x:0,y:0}
					
					now.x = touchC.clientX
					now.y = touchC.clientY
					
					disX = now.x - start.x
					disY = now.y - start.y
					
					if(isFirst){
						if(Math.abs(disY)>Math.abs(disX)){
							isX = false
							return
						}
					}
					
					ulNode.style.left = elementSize.x + disX + "px"
					
				})
				scrollNode.addEventListener("touchend",function (ev){
					ev = ev || event;
					//document.documentElement.clientWidth 视口宽度
					//ulNode.offsetLeft  当前元素的左距离
					index = ulNode.offsetLeft/document.documentElement.clientWidth
					index = Math.round(index)
					
					if (index == 1-imgNodes.length){
						index = 0
					}
					if(index > 0){
						index = 0
					}else if(index < 1-imgNodes.length){
						index = 1-imgNodes.length
					}
					for(var i=0;i<pointsSpan.length;i++){
						pointsSpan[i].classList.remove("active");
					}
					pointsSpan[-index].classList.add("active");
					//ulNode.style.transition = "1s transform";
					ulNode.style.left = index*(document.documentElement.clientWidth) + "px";
					
					
					auto()
				})
				//竖向滑屏
				
				var isY = true
				var left = document.querySelector("#wrap .scroll-content div .hua .leftt")
				var center = document.querySelector("#wrap .scroll-content div .hua .center")
				//var right = document.querySelector("#wrap .scroll-content div .hua .rightt")
				var hua = document.querySelector("#wrap .scroll-content div .hua")
				console.log(hua.offsetWidth)
				leftMin = content.clientHeight - left.offsetHeight
				centerMin = content.clientHeight - center.offsetHeight
				//rightMin = content.clientHeight - right.offsetHeight
				
				
				
				var minY = 0
				if(leftMin < centerMin){
					minY = leftMin
				}else{
					minY = centerMin
				}
				
				
				content.addEventListener("touchstart",function (ev){			
					
					ev = ev || event
					var huaLeft = hua.offsetLeft
					if(huaLeft < -700){
						return
					}
					
					var touchC = ev.changedTouches[0]
					item.style.transition = 'none';
					
					start.x = touchC.clientX
					start.y = touchC.clientY
					
					elementSize.y= item.offsetTop
					
					
					isY = true
					isFirst = true
				})
				content.addEventListener("touchmove",function (ev){
					if(!isY){
						return
					}
					
					ev = ev || event
					var touchC = ev.changedTouches[0]
					var now = {x:0,y:0}
					
					now.x = touchC.clientX
					now.y = touchC.clientY
					
					disX = now.x - start.x
					disY = now.y - start.y
					if(disY >= 300){
						disY = 300
					}
					
					if(isFirst){
						if(Math.abs(disX)>Math.abs(disY)){
							isY = false
							return
						}
					}
					var moveY = elementSize.y + disY
					
					item.style.top= moveY + "px"
				})
				content.addEventListener("touchend",function (ev){
					ev = ev || event
					var touchC = ev.changedTouches[0]
					var now = {x:0,y:0}
					
					now.x = touchC.clientX
					now.y = touchC.clientY
					
					disX = now.x - start.x
					disY = now.y - start.y
					
					//var speen = Math.abs(disY/item.offsetHeight)
					var bsr = ""
					var moveY = elementSize.y + disY
					
					if(moveY > 0){
						moveY = 0
						bsr = "cubic-bezier(.34,1.26,.69,.98)"
						
						item.style.transition = "1s "+bsr+" top"
						item.style.top= moveY + "px"
						
					}else if(moveY < minY){
						
						bsr = "cubic-bezier(.34,1.26,.69,.98)"
						if(huaLeft == 0){
							moveY = leftMin
							item.style.transition = "1s "+bsr+" top"
							item.style.top= moveY + "px"
						}else if(huaLeft < 0  && huaLeft > -700){
							moveY = centerMin
							item.style.transition = "1s "+bsr+" top"
							item.style.top= moveY + "px"
						}
						
						
					}
					
					
					
					
				})
				
				//无缝滑屏
				auto()
				function auto(){
					clearInterval(timer)
					timer = setInterval(function(){
						ulNode.style.transition = "1s left";
						
						setTimeout(function (){
							if (index == (1 - imgNodes.length)){
								ulNode.style.transition = "none";
								ulNode.style.left = index*(document.documentElement.clientWidth) + "px";
								index = 0
								
							}
							for(var i=0;i<pointsSpan.length;i++){
								pointsSpan[i].classList.remove("active");
							}
							pointsSpan[Math.abs(index)].classList.add("active");
							ulNode.style.left = index*(document.documentElement.clientWidth) + "px";
							index --
						},50)
						
					},2000)
					
				}
			
				//频道点换
				var ulList = document.querySelector("#wrap .head .head-bottom .list")
				var liNodes = document.querySelectorAll("#wrap .head .head-bottom .list li")
				var huaWidth = document.querySelector("#wrap .scroll-content div .hua")
				var mask = document.querySelector("#wrap .head .head-bottom .mask")
				
				var maskleft = 0
				var huaLeft = 0
				click()
				function click(){
					//var index = 0
					ulList.addEventListener("touchstart",function(ev){
						ev = ev || event
					})
					ulList.addEventListener("touchmove",function(){
						
					})
					
					ulList.addEventListener("touchend",function(ev){				
						
						ev = ev || event
						var touchC = ev.changedTouches[0] 
						var contentLeft = document.documentElement.clientWidth	
						var chang = contentLeft/3
								
						for(let i=0;i<liNodes.length;i++){
							liNodes[i].onclick = function (){
								switch (i){
									case 0:
										maskleft = 0
										huaLeft = 0
										mask.style.left = maskleft + "px"
										huaWidth.style.left = huaLeft + "px"
										break;
									case 1:
										maskleft = chang
										huaLeft = -contentLeft
										mask.style.left = maskleft + "px"
										huaWidth.style.left = huaLeft + "px"
										break;
									case 2:
										maskleft = 2*chang
										huaLeft = -2*contentLeft
										mask.style.left = maskleft + "px"
										huaWidth.style.left = huaLeft + "px"
										break;
								}
							}
						}
					})
				}
			}
		}
	</script>
</html>
